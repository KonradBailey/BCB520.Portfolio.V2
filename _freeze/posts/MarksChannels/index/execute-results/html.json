{
  "hash": "7585960fff873928c69efe483799c270",
  "result": {
    "markdown": "---\ntitle: 'Assignment 4'\nsubtitle: 'Marks and Channels'\nauthor: 'Konrad Bailey'\ndate: 'Spring 2024'\ncategories: [Assignment, Dataviz]\nimage: \"image.jpg\"\ncode-fold: true\ncode-tools: true\ndescription: Analyzing the effect of soil parent material on the height/diameter ratio of Douglas fir trees after controlling for mean annual radiation.\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ lubridate 1.9.3     ✔ tibble    3.2.1\n✔ purrr     1.0.2     ✔ tidyr     1.3.0\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(dplyr)\n#library(plotly)\n```\n:::\n\n\n\n## Expressiveness and Effectiveness\n\n#### Figure 1\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(42) # For reproducibility\n\n# Creating the dataset\ndeadly.critters <- data.frame(\n  critter.type = rep(c(\"mosquitoes\", \"the family dog\", \"hippopotamuses\", \"rattle snakes\"), each = 50),\n  humans.killed = c(\n    rpois(50, lambda = 1000), # Mosquitoes have the highest score, using Poisson distribution for count data\n    rpois(50, lambda = 500),  # The family dog has the second highest score\n    rpois(50, lambda = 20),   # Hippopotamuses have lower scores\n    rpois(50, lambda = 20)    # Rattle snakes have lower scores, similar to hippopotamuses\n  )\n)\n\n# Viewing the first few rows of the dataset\nhead(deadly.critters)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  critter.type humans.killed\n1   mosquitoes          1043\n2   mosquitoes           982\n3   mosquitoes          1001\n4   mosquitoes           965\n5   mosquitoes           996\n6   mosquitoes           979\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Assuming the dataset deadly.critters already exists\n# Summarizing average humans killed by each critter type for the bar heights\navg_kills <- aggregate(humans.killed ~ critter.type, data = deadly.critters, mean)\n\n# Creating the bar chart\nggplot(avg_kills, aes(x = critter.type, y = humans.killed, fill = critter.type)) +\n  geom_bar(stat = \"identity\", position = position_dodge(), width = 0.7) +\n  scale_fill_manual(values = c(\"mosquitoes\" = \"#9C51B6\", \n                               \"the family dog\" = \"#D86060\", \n                               \"hippopotamuses\" = \"#324AB2\", \n                               \"rattle snakes\" = \"#708D81\")) +\n  labs(title = \"Humans Killed by Critter Type\",\n       x = \"Critter Type\", y = \"Average Humans Killed\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) # Improve readability of critter type labels\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n#### Figure 2\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Summarize data to get total or average humans.killed by critter type\nsummary_data <- deadly.critters %>%\n  group_by(critter.type) %>%\n  summarise(total_killed = sum(humans.killed)) %>%\n  mutate(percentage = total_killed / sum(total_killed)) %>%\n  arrange(desc(percentage))\n\n# Create a factor with levels ordered by the percentage to use in the fill aesthetic\nsummary_data$critter.type <- factor(summary_data$critter.type, levels = summary_data$critter.type)\n\n# Manually create a gradient based on the percentage for each critter type\ngradient_colors <- colorRampPalette(c(\"#93A5A6\", \"#708D81\"))(n = nrow(summary_data))\n\n# Creating a pie chart\nggplot(summary_data, aes(x = \"\", y = percentage, fill = critter.type)) +\n  geom_bar(width = 1, stat = \"identity\", color = \"white\") + \n  coord_polar(\"y\", start = 0) +\n  scale_fill_manual(values = setNames(gradient_colors, summary_data$critter.type)) +\n  labs(title = \"Interpretation Challenge: Humans Killed by Critters\",\n       x = NULL, y = NULL, fill = \"Critter Type\") +\n  theme_void() +\n  theme(legend.title = element_blank())\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\nThis visualization is much less effective than the previous figure. Assessing the most important attribute is obscured by using a pie chart and color coding critter types using similar colors. Additionally the pie chart makes it difficult to discern if any difference in exists between rattle snakes and hippopotamuses.\n\n## Discriminability\n\n#### Figure 3\n\n\n::: {.cell}\n\n```{.r .cell-code}\nage_groups <- c('10-15', '15-20', '20-25', '25-30', '30-35')\nworry_scores <- c(2, 8, 9, 7, 4) # Example scores based on the described trend\n\n# Create a data frame\nnonsense.data <- data.frame(\n  Age_Group = factor(age_groups, levels = age_groups),\n  Mean_Worry_Score = worry_scores\n)\n\n# Display the dataset\nprint(nonsense.data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  Age_Group Mean_Worry_Score\n1     10-15                2\n2     15-20                8\n3     20-25                9\n4     25-30                7\n5     30-35                4\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create the bar chart\nggplot(nonsense.data, aes(x = Age_Group, y = Mean_Worry_Score, fill = \"glaucous green\")) +\n  geom_bar(stat = \"identity\", color = \"black\", fill = \"#6082B6\") + # Fill bars with glaucous green\n  labs(title = \"Worrying About Stupid Nonsense as a Function of Age\", x = \"Age Group\", y = \"Mean Worry Score\") +\n  theme_minimal() +\n  theme(legend.position = \"none\") # Hide the legend\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nChunking age into five year bins makes it easy to discriminate between particular segments of one's life and spot trends in worrying about stupid nonsense scores.\n\n#### Figure 4\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define the age range in three-month segments as fractions of a year\nages <- seq(10, 35, by = 0.25)\n\n# Initialize worry scores according to the described trend\nworry_scores <- numeric(length(ages))\nworry_scores[ages <= 15] <- 2 # Very low scores for ages 10-15\nworry_scores[ages > 15 & ages <= 20] <- seq(3, 9, length.out = length(worry_scores[ages > 15 & ages <= 20])) # Increase from 15-20\nworry_scores[ages > 20 & ages <= 25] <- 9 # High scores 20-25\nworry_scores[ages > 25 & ages <= 30] <- seq(9, 7, length.out = length(worry_scores[ages > 25 & ages <= 30])) # Decline 25-30\nworry_scores[ages > 30 & ages <= 35] <- seq(7, 4, length.out = length(worry_scores[ages > 30 & ages <= 35])) # Further decline 30-35\n\n# Create the dataset\ndataset_three_month <- data.frame(\n  Age = ages,\n  Worry_Score = worry_scores\n)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot\nggplot(dataset_three_month, aes(x = as.factor(Age), y = Worry_Score)) +\n  geom_bar(stat = \"identity\", fill = \"#6082B6\") + # Glaucous green bars\n  labs(title = \"Cruddy Barchart About Worrying Too Much\",\n       x = \"Age (Years in Three-Month Segments)\",\n       y = \"Worry Score\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5)) + # Rotate x-axis labels for readability\n  theme(legend.position = \"none\") # Hide the legend\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nBinning the data into three month segments still depicts the general trend of the data, but it's cluttered and the x-axis looks terrible.\n\n## Separability\n\n#### Figure 5\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create the imaginary dataset\ncereal.data <- data.frame(\n  age = factor(c(\"5 years old\", \"50 years old\")),\n  cereal.consumption = c(8, 3) # Assuming mean scores for demonstration\n)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncolors <- c(\"5 years old\" = \"#8E3A59\",  # Spinel red\n            \"50 years old\" = \"#93C572\")  # Pistachio green\n\n# Plot\nggplot(cereal.data, aes(x = age, y = cereal.consumption, fill = age)) +\n  geom_bar(stat = \"identity\", color = \"black\", show.legend = FALSE) +\n  scale_fill_manual(values = colors) +\n  labs(title = \"Cereal Consumption as a Function of Age\",\n       x = \"Age\",\n       y = \"Cereal Consumption Score\") +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) # Improve readability\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nThis barchart uses position to convey differences in cereal consumption across the levels for the independent variable age. The two levels of age are differentiated by the fill color of the bars, which is entirely separable from position as a channel.\n\n#### Figure 6\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Adjusting the example dataset for more overlap, same as before\nset.seed(42) # For reproducibility\ndata <- data.frame(\n  Age_Level = factor(rep(c(\"5 years old\", \"50 years old\"), each = 50)),\n  Score = c(rnorm(50, mean = 8, sd = 2), rnorm(50, mean = 5, sd = 2)), # More overlap\n  X_Position = rep(1:50, times = 2)\n)\n\n# Venice green color\nvenice_green <- \"#055C59\"\n\n# Creating the plot with the specified updates\nggplot(data, aes(x = X_Position, y = Score, group = Age_Level)) +\n  geom_segment(data = subset(data, Age_Level == \"5 years old\"), \n               aes(xend = X_Position, yend = Score - 0.2, color = Age_Level), \n               size = 1.2, linetype = \"solid\") + # Slightly larger lines for visibility\n  geom_segment(data = subset(data, Age_Level == \"50 years old\"), \n               aes(xend = X_Position + 0.3, yend = Score - 0.2, color = Age_Level), \n               size = 1.2, linetype = \"solid\") + # Slightly offset to simulate \"bent\"\n  scale_color_manual(name = \"Age Level\",\n                     values = c(\"5 years old\" = venice_green, \"50 years old\" = venice_green),\n                     labels = c(\"5 years old (vertical rectangle)\", \"50 years old (slightly tilted rectangle)\")) +\n  theme_minimal() +\n  labs(title = \"Cereal Consumption as a Function of Age - Cruddy Separability V1\", x = \"Data Point Index\", y = \"Score\") +\n  theme(legend.position = \"right\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Note: Both age levels use the venice green color but the legend explains the line types\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(42) # For reproducibility\ncereal.data.V2 <- data.frame(\n  Age_Level = factor(rep(c(\"5 years old\", \"50 years old\"), each = 50)),\n  Score = c(rnorm(50, mean = 8, sd = 2), rnorm(50, mean = 5, sd = 2)), # More overlap\n  X_Position = c(rnorm(50, mean = 8, sd = 2), rnorm(50, mean = 8, sd = 2)),\n    Y_Position = c(rnorm(50, mean = 8, sd = 2), rnorm(50, mean = 8, sd = 2))\n)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create the scatterplot\nggplot(cereal.data.V2, aes(x = X_Position, y = Y_Position)) +\n  geom_point(aes(shape = Age_Level, color = Score, alpha = Score), size = 3) +\n  #scale_shape_manual(values = c(\"5 years old\" = 17, \"50 years old\" = 15)) + # Assign shapes\n  #scale_color_gradient(low = \"blue\", high = \"red\") + # Assign color gradient for Score\n  labs(title = \"Cereal Consumption as a Function of Age - Cruddy Separability V2\",\n       x = \"X Position\", y = \"Y Position\",\n       color = \"Score\", shape = \"Age Level\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n#### Figure 7\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(42)  # Ensure reproducibility\n\n# Sample sizes\nn <- 50\n\n# Generating data for the categorical independent variable 'critters'\ncritters <- factor(rep(c(\"gophers\", \"bunny-rabbits\", \"weasels\"), each = n))\n\n# Generating data for the binary dependent variable 'bubonic plague'\n# with 'gophers' having a much higher infection rate\nbubonic_plague <- c(\n  rbinom(n, 1, prob = 0.8),  # High infection rate for 'gophers'\n  rbinom(n, 1, prob = 0.2),  # Lower infection rate for 'bunny-rabbits'\n  rbinom(n, 1, prob = 0.15)  # Even lower infection rate for 'weasels'\n)\n\n# Creating the data frame and naming it 'bubonic.data'\nbubonic.data <- data.frame(critters, bubonic_plague)\n\n# Viewing the first few rows of 'bubonic.data'\nhead(bubonic.data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  critters bubonic_plague\n1  gophers              0\n2  gophers              0\n3  gophers              1\n4  gophers              0\n5  gophers              1\n6  gophers              1\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculating the infection rate for each critter type\ninfection_rates <- bubonic.data %>%\n  group_by(critters) %>%\n  summarise(Infection_Rate = mean(bubonic_plague)) # since bubonic_plague is 0 for not infected and 1 for infected\n\n# Viewing the infection rates\nprint(infection_rates)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  critters      Infection_Rate\n  <fct>                  <dbl>\n1 bunny-rabbits           0.1 \n2 gophers                 0.64\n3 weasels                 0.16\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(bubonic.data, aes(x = critters, y = bubonic_plague, fill = critters)) +\n  stat_summary(fun.y = \"mean\", geom = \"bar\", position = \"dodge\", aes(alpha = critters)) +\n  scale_fill_manual(values = c(\"gophers\" = \"#6C3461\", \"weasels\" = \"#708D81\", \"bunny-rabbits\" = \"#93A5A6\")) +\n  scale_alpha_manual(values = c(\"gophers\" = 1, \"weasels\" = 0.9, \"bunny-rabbits\" = 0.9)) +\n  labs(title = \"Bubonic Plague Infection Rates by Critter Type\",\n       x = \"Critter Type\", y = \"Infection Rate\") +\n  theme_minimal() +\n  theme(plot.title = element_text(hjust = 0.5)) +\n  guides(fill = guide_legend(title = \"Critter Type\"), alpha = FALSE)  # Remove alpha legend\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: The `fun.y` argument of `stat_summary()` is deprecated as of ggplot2 3.3.0.\nℹ Please use the `fun` argument instead.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: The `<scale>` argument of `guides()` cannot be `FALSE`. Use \"none\" instead as\nof ggplot2 3.3.4.\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\nThis figure uses the channel position on a common scale, enhanced by a sharp color contrast between the critter type with the highest infection rate and the other two types of critters, to create POP-OUT.\n\n#### Figure 8\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate the proportion or rate of infection for each critter\ninfection_rates <- bubonic.data %>%\n  group_by(critters) %>%\n  summarise(Infected_Rate = mean(bubonic_plague), .groups = 'drop')  # Calculate infection rate\n\n# Creating the bar chart with a slightly less distorted scale\nggplot(infection_rates, aes(x = critters, y = Infected_Rate, fill = critters)) +\n  geom_bar(stat = \"identity\", position = position_dodge(), show.legend = FALSE) +\n  scale_fill_manual(values = c(\"weasels\" = \"#93A5A6\", \"bunny-rabbits\" = \"#93A5A6\", \"gophers\" = \"#93A5A6\")) +\n  labs(title = \"Minimized Pop-Out Across Critters\",\n       x = \"Critter Type\", y = \"Infection Rate\") +\n  ylim(0, 10) +  # Adjust the scale to be less distorted\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))  # Improve readability of x labels\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\nThis bar chart reduces pop-out by distorting the scale of the y-axis and making the color of the bars uniform.\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}